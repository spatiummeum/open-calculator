dc9bccd95f4e1f3ac999c55289deca1a
"use strict";

// =========================
// VARIABLES Y ELEMENTOS DEL DOM
// =========================
// Array para almacenar los productos a descontar
// Cada producto es un objeto: { value: número, isHalf: booleano }
let productsToDiscount = [];
const invoiceTotalInput = document.getElementById('invoice-total');
const productValueInput = document.getElementById('product-value');
const isHalfCheckbox = document.getElementById('is-half');
const addProductBtn = document.getElementById('add-product-btn');
const calculateBtn = document.getElementById('calculate-btn');
const productsList = document.getElementById('products-list');
const resultsCard = document.getElementById('results-card');
const clearAllBtn = document.getElementById('clear-all-btn');

// =========================
// UTILIDAD: Formatear moneda CLP
// =========================
// Formatea un número como moneda chilena (pesos) con 2 decimales
// Ejemplo: 10000.50 -> "$10.000,50"
const formatCurrency = amount => {
  return new Intl.NumberFormat('es-CL', {
    style: 'currency',
    currency: 'CLP',
    minimumFractionDigits: 2,
    maximumFractionDigits: 2
  }).format(amount);
};

// =========================
// MANEJO DE ERRORES
// =========================
// Referencias a elementos DOM para mostrar mensajes de error
const errorAlertElement = document.getElementById('error-alert');
const errorMessageElement = document.getElementById('error-message');

// Muestra un mensaje de error en la interfaz
// @param {string} message - Mensaje de error a mostrar
const showError = message => {
  errorMessageElement.textContent = message;
  errorAlertElement.style.display = 'block';
};

// Oculta el mensaje de error
const hideError = () => {
  errorAlertElement.style.display = 'none';
};

// =========================
// RENDERIZAR LISTA DE PRODUCTOS
// =========================
// Actualiza la interfaz mostrando la lista de productos agregados
// Si no hay productos, muestra un estado vacío
function renderProductsList() {
  // Limpiar lista de manera segura
  while (productsList.firstChild) {
    productsList.removeChild(productsList.firstChild);
  }
  if (productsToDiscount.length === 0) {
    const emptyState = document.createElement('p');
    emptyState.className = 'empty-state';
    emptyState.textContent = 'No hay productos agregados';
    productsList.appendChild(emptyState);
    calculateBtn.style.display = 'none';
    clearAllBtn.style.display = 'none';
    return;
  }
  productsToDiscount.forEach((product, idx) => {
    const div = document.createElement('div');
    div.className = 'product-item';
    const productInfo = document.createElement('div');
    productInfo.className = 'product-info';
    const p = document.createElement('p');
    const strong = document.createElement('strong');
    // Usar valor float directamente
    const baseValue = product.isHalf ? product.value / 2 : product.value;
    strong.textContent = formatCurrency(baseValue);
    p.appendChild(document.createTextNode('Producto con valor base de '));
    p.appendChild(strong);
    const small = document.createElement('small');
    small.textContent = `Unidades: ${product.isHalf ? 'Sí' : 'No'}`;
    productInfo.appendChild(p);
    productInfo.appendChild(small);
    const button = document.createElement('button');
    button.className = 'btn btn-outline btn-small';
    button.dataset.idx = idx;
    button.title = 'Eliminar';

    // Crear ícono de eliminación de manera segura
    const icon = document.createElement('span');
    icon.textContent = '✕'; // Uso de entidad segura
    button.appendChild(icon);
    div.appendChild(productInfo);
    div.appendChild(button);
    productsList.appendChild(div);
  });
  calculateBtn.style.display = 'block';
  clearAllBtn.style.display = 'block';

  // Asignar eventos a los botones de eliminar
  productsList.querySelectorAll('button[data-idx]').forEach(btn => {
    btn.addEventListener('click', e => {
      const idx = parseInt(btn.getAttribute('data-idx'));
      if (!isNaN(idx) && idx >= 0 && idx < productsToDiscount.length) {
        productsToDiscount.splice(idx, 1);
        renderProductsList();
        resultsCard.style.display = 'none';
      }
    });
  });
}

// =========================
// EVENTO: Agregar producto
// =========================
// Maneja el clic en el botón "Agregar producto":
// 1. Valida que el valor ingresado sea válido (>0)
// 2. Agrega el producto al array productsToDiscount
// 3. Actualiza la lista de productos
// 4. Limpia los campos de entrada
addProductBtn.addEventListener('click', () => {
  const value = parseFloat(productValueInput.value);
  const isHalf = isHalfCheckbox.checked;

  // Validación mejorada - valores numéricos y límites
  if (isNaN(value) || value <= 0 || value > 1000000000) {
    showError('Por favor, ingrese un valor de producto válido entre 1 y 1.000.000.000.');
    return;
  }

  // Validar que el valor no contenga más de 2 decimales
  if ((value.toString().split('.')[1] || []).length > 2) {
    showError('Por favor, ingrese un valor con máximo 2 decimales.');
    return;
  }

  // Guardamos el producto en nuestro array
  productsToDiscount.push({
    value,
    isHalf
  });
  renderProductsList();
  // Limpiamos los inputs y ocultamos errores
  productValueInput.value = '';
  isHalfCheckbox.checked = false;
  productValueInput.focus();
  hideError();
});

// =========================
// EVENTO: Limpiar todo
// =========================
// Resetea toda la aplicación:
// 1. Vacía la lista de productos
// 2. Limpia todos los campos de entrada
// 3. Oculta los resultados
clearAllBtn.addEventListener('click', () => {
  productsToDiscount.length = 0;
  renderProductsList();
  resultsCard.style.display = 'none';
  productValueInput.value = '';
  isHalfCheckbox.checked = false;
  invoiceTotalInput.value = '';
});

// =========================
// EVENTO: Calcular descuento final
// =========================
// Realiza el cálculo completo de descuentos:
// 1. Valida el monto total de la factura
// 2. Calcula el descuento para cada producto (considerando IVA)
// 3. Actualiza la interfaz con los resultados
calculateBtn.addEventListener('click', () => {
  const originalInvoiceTotal = parseFloat(invoiceTotalInput.value);

  // Validación mejorada para el total de la factura
  if (isNaN(originalInvoiceTotal) || originalInvoiceTotal <= 0 || originalInvoiceTotal > 10000000000) {
    showError('Por favor, ingrese un monto de factura válido entre 1 y 10.000.000.000.');
    return;
  }

  // Validar decimales
  if ((originalInvoiceTotal.toString().split('.')[1] || []).length > 2) {
    showError('El monto de la factura debe tener máximo 2 decimales.');
    return;
  }
  if (productsToDiscount.length === 0) {
    showError('Por favor, añada al menos un producto para descontar.');
    return;
  }
  hideError();
  let totalDiscountAmount = 0;
  const IVA_RATE = 0.19; // Tasa de IVA (19%)

  // Cálculo de descuento manteniendo precisión float
  productsToDiscount.forEach(product => {
    // 1. Determinar valor base: completo o mitad (para unidades)
    let baseValueToDiscount = product.isHalf ? product.value / 2 : product.value;

    // 2. Calcular valor con IVA: base * (1 + IVA_RATE)
    let valueWithIva = baseValueToDiscount * (1 + IVA_RATE);

    // 3. Acumular al descuento total manteniendo float
    totalDiscountAmount += valueWithIva;
  });

  // 4. Calcular el nuevo total con float
  const newInvoiceTotal = originalInvoiceTotal - totalDiscountAmount;

  // Mostramos los resultados
  document.getElementById('result-original').textContent = formatCurrency(originalInvoiceTotal);
  document.getElementById('result-discount').textContent = formatCurrency(totalDiscountAmount);
  document.getElementById('result-total').textContent = formatCurrency(newInvoiceTotal);
  resultsCard.style.display = 'block';
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwcm9kdWN0c1RvRGlzY291bnQiLCJpbnZvaWNlVG90YWxJbnB1dCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJwcm9kdWN0VmFsdWVJbnB1dCIsImlzSGFsZkNoZWNrYm94IiwiYWRkUHJvZHVjdEJ0biIsImNhbGN1bGF0ZUJ0biIsInByb2R1Y3RzTGlzdCIsInJlc3VsdHNDYXJkIiwiY2xlYXJBbGxCdG4iLCJmb3JtYXRDdXJyZW5jeSIsImFtb3VudCIsIkludGwiLCJOdW1iZXJGb3JtYXQiLCJzdHlsZSIsImN1cnJlbmN5IiwibWluaW11bUZyYWN0aW9uRGlnaXRzIiwibWF4aW11bUZyYWN0aW9uRGlnaXRzIiwiZm9ybWF0IiwiZXJyb3JBbGVydEVsZW1lbnQiLCJlcnJvck1lc3NhZ2VFbGVtZW50Iiwic2hvd0Vycm9yIiwibWVzc2FnZSIsInRleHRDb250ZW50IiwiZGlzcGxheSIsImhpZGVFcnJvciIsInJlbmRlclByb2R1Y3RzTGlzdCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImxlbmd0aCIsImVtcHR5U3RhdGUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJmb3JFYWNoIiwicHJvZHVjdCIsImlkeCIsImRpdiIsInByb2R1Y3RJbmZvIiwicCIsInN0cm9uZyIsImJhc2VWYWx1ZSIsImlzSGFsZiIsInZhbHVlIiwiY3JlYXRlVGV4dE5vZGUiLCJzbWFsbCIsImJ1dHRvbiIsImRhdGFzZXQiLCJ0aXRsZSIsImljb24iLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsImlzTmFOIiwic3BsaWNlIiwicGFyc2VGbG9hdCIsImNoZWNrZWQiLCJ0b1N0cmluZyIsInNwbGl0IiwicHVzaCIsImZvY3VzIiwib3JpZ2luYWxJbnZvaWNlVG90YWwiLCJ0b3RhbERpc2NvdW50QW1vdW50IiwiSVZBX1JBVEUiLCJiYXNlVmFsdWVUb0Rpc2NvdW50IiwidmFsdWVXaXRoSXZhIiwibmV3SW52b2ljZVRvdGFsIl0sInNvdXJjZXMiOlsibWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFZBUklBQkxFUyBZIEVMRU1FTlRPUyBERUwgRE9NXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBcnJheSBwYXJhIGFsbWFjZW5hciBsb3MgcHJvZHVjdG9zIGEgZGVzY29udGFyXG4vLyBDYWRhIHByb2R1Y3RvIGVzIHVuIG9iamV0bzogeyB2YWx1ZTogbsO6bWVybywgaXNIYWxmOiBib29sZWFubyB9XG5sZXQgcHJvZHVjdHNUb0Rpc2NvdW50ID0gW107XG5jb25zdCBpbnZvaWNlVG90YWxJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnZvaWNlLXRvdGFsJyk7XG5jb25zdCBwcm9kdWN0VmFsdWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9kdWN0LXZhbHVlJyk7XG5jb25zdCBpc0hhbGZDaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpcy1oYWxmJyk7XG5jb25zdCBhZGRQcm9kdWN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1wcm9kdWN0LWJ0bicpO1xuY29uc3QgY2FsY3VsYXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbGN1bGF0ZS1idG4nKTtcbmNvbnN0IHByb2R1Y3RzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9kdWN0cy1saXN0Jyk7XG5jb25zdCByZXN1bHRzQ2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRzLWNhcmQnKTtcbmNvbnN0IGNsZWFyQWxsQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsZWFyLWFsbC1idG4nKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVRJTElEQUQ6IEZvcm1hdGVhciBtb25lZGEgQ0xQXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGb3JtYXRlYSB1biBuw7ptZXJvIGNvbW8gbW9uZWRhIGNoaWxlbmEgKHBlc29zKSBjb24gMiBkZWNpbWFsZXNcbi8vIEVqZW1wbG86IDEwMDAwLjUwIC0+IFwiJDEwLjAwMCw1MFwiXG5jb25zdCBmb3JtYXRDdXJyZW5jeSA9IChhbW91bnQpID0+IHtcbiAgICByZXR1cm4gbmV3IEludGwuTnVtYmVyRm9ybWF0KCdlcy1DTCcsIHsgXG4gICAgICAgIHN0eWxlOiAnY3VycmVuY3knLCBcbiAgICAgICAgY3VycmVuY3k6ICdDTFAnLFxuICAgICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIsXG4gICAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0czogMlxuICAgIH0pLmZvcm1hdChhbW91bnQpO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTUFORUpPIERFIEVSUk9SRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFJlZmVyZW5jaWFzIGEgZWxlbWVudG9zIERPTSBwYXJhIG1vc3RyYXIgbWVuc2FqZXMgZGUgZXJyb3JcbmNvbnN0IGVycm9yQWxlcnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yLWFsZXJ0Jyk7XG5jb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yLW1lc3NhZ2UnKTtcblxuLy8gTXVlc3RyYSB1biBtZW5zYWplIGRlIGVycm9yIGVuIGxhIGludGVyZmF6XG4vLyBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIE1lbnNhamUgZGUgZXJyb3IgYSBtb3N0cmFyXG5jb25zdCBzaG93RXJyb3IgPSAobWVzc2FnZSkgPT4ge1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIGVycm9yQWxlcnRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xufTtcblxuLy8gT2N1bHRhIGVsIG1lbnNhamUgZGUgZXJyb3JcbmNvbnN0IGhpZGVFcnJvciA9ICgpID0+IHtcbiAgICBlcnJvckFsZXJ0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUkVOREVSSVpBUiBMSVNUQSBERSBQUk9EVUNUT1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFjdHVhbGl6YSBsYSBpbnRlcmZheiBtb3N0cmFuZG8gbGEgbGlzdGEgZGUgcHJvZHVjdG9zIGFncmVnYWRvc1xuLy8gU2kgbm8gaGF5IHByb2R1Y3RvcywgbXVlc3RyYSB1biBlc3RhZG8gdmFjw61vXG5mdW5jdGlvbiByZW5kZXJQcm9kdWN0c0xpc3QoKSB7XG4gICAgLy8gTGltcGlhciBsaXN0YSBkZSBtYW5lcmEgc2VndXJhXG4gICAgd2hpbGUgKHByb2R1Y3RzTGlzdC5maXJzdENoaWxkKSB7XG4gICAgICAgIHByb2R1Y3RzTGlzdC5yZW1vdmVDaGlsZChwcm9kdWN0c0xpc3QuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChwcm9kdWN0c1RvRGlzY291bnQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGVtcHR5U3RhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGVtcHR5U3RhdGUuY2xhc3NOYW1lID0gJ2VtcHR5LXN0YXRlJztcbiAgICAgICAgZW1wdHlTdGF0ZS50ZXh0Q29udGVudCA9ICdObyBoYXkgcHJvZHVjdG9zIGFncmVnYWRvcyc7XG4gICAgICAgIHByb2R1Y3RzTGlzdC5hcHBlbmRDaGlsZChlbXB0eVN0YXRlKTtcbiAgICAgICAgY2FsY3VsYXRlQnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGNsZWFyQWxsQnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgcHJvZHVjdHNUb0Rpc2NvdW50LmZvckVhY2goKHByb2R1Y3QsIGlkeCkgPT4ge1xuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2LmNsYXNzTmFtZSA9ICdwcm9kdWN0LWl0ZW0nO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcHJvZHVjdEluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcHJvZHVjdEluZm8uY2xhc3NOYW1lID0gJ3Byb2R1Y3QtaW5mbyc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBjb25zdCBzdHJvbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHJvbmcnKTtcbiAgICAgICAgLy8gVXNhciB2YWxvciBmbG9hdCBkaXJlY3RhbWVudGVcbiAgICAgICAgY29uc3QgYmFzZVZhbHVlID0gcHJvZHVjdC5pc0hhbGYgPyBwcm9kdWN0LnZhbHVlIC8gMiA6IHByb2R1Y3QudmFsdWU7XG4gICAgICAgIHN0cm9uZy50ZXh0Q29udGVudCA9IGZvcm1hdEN1cnJlbmN5KGJhc2VWYWx1ZSk7XG4gICAgICAgIFxuICAgICAgICBwLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdQcm9kdWN0byBjb24gdmFsb3IgYmFzZSBkZSAnKSk7XG4gICAgICAgIHAuYXBwZW5kQ2hpbGQoc3Ryb25nKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNtYWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc21hbGwnKTtcbiAgICAgICAgc21hbGwudGV4dENvbnRlbnQgPSBgVW5pZGFkZXM6ICR7cHJvZHVjdC5pc0hhbGYgPyAnU8OtJyA6ICdObyd9YDtcbiAgICAgICAgXG4gICAgICAgIHByb2R1Y3RJbmZvLmFwcGVuZENoaWxkKHApO1xuICAgICAgICBwcm9kdWN0SW5mby5hcHBlbmRDaGlsZChzbWFsbCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLmNsYXNzTmFtZSA9ICdidG4gYnRuLW91dGxpbmUgYnRuLXNtYWxsJztcbiAgICAgICAgYnV0dG9uLmRhdGFzZXQuaWR4ID0gaWR4O1xuICAgICAgICBidXR0b24udGl0bGUgPSAnRWxpbWluYXInO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgw61jb25vIGRlIGVsaW1pbmFjacOzbiBkZSBtYW5lcmEgc2VndXJhXG4gICAgICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIGljb24udGV4dENvbnRlbnQgPSAn4pyVJzsgLy8gVXNvIGRlIGVudGlkYWQgc2VndXJhXG4gICAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChpY29uKTtcbiAgICAgICAgXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChwcm9kdWN0SW5mbyk7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgICAgICBwcm9kdWN0c0xpc3QuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICB9KTtcbiAgICBcbiAgICBjYWxjdWxhdGVCdG4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgY2xlYXJBbGxCdG4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgXG4gICAgLy8gQXNpZ25hciBldmVudG9zIGEgbG9zIGJvdG9uZXMgZGUgZWxpbWluYXJcbiAgICBwcm9kdWN0c0xpc3QucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW2RhdGEtaWR4XScpLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IHBhcnNlSW50KGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWR4JykpO1xuICAgICAgICAgICAgaWYgKCFpc05hTihpZHgpICYmIGlkeCA+PSAwICYmIGlkeCA8IHByb2R1Y3RzVG9EaXNjb3VudC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBwcm9kdWN0c1RvRGlzY291bnQuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgcmVuZGVyUHJvZHVjdHNMaXN0KCk7XG4gICAgICAgICAgICAgICAgcmVzdWx0c0NhcmQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVWRU5UTzogQWdyZWdhciBwcm9kdWN0b1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTWFuZWphIGVsIGNsaWMgZW4gZWwgYm90w7NuIFwiQWdyZWdhciBwcm9kdWN0b1wiOlxuLy8gMS4gVmFsaWRhIHF1ZSBlbCB2YWxvciBpbmdyZXNhZG8gc2VhIHbDoWxpZG8gKD4wKVxuLy8gMi4gQWdyZWdhIGVsIHByb2R1Y3RvIGFsIGFycmF5IHByb2R1Y3RzVG9EaXNjb3VudFxuLy8gMy4gQWN0dWFsaXphIGxhIGxpc3RhIGRlIHByb2R1Y3Rvc1xuLy8gNC4gTGltcGlhIGxvcyBjYW1wb3MgZGUgZW50cmFkYVxuYWRkUHJvZHVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHBhcnNlRmxvYXQocHJvZHVjdFZhbHVlSW5wdXQudmFsdWUpO1xuICAgIGNvbnN0IGlzSGFsZiA9IGlzSGFsZkNoZWNrYm94LmNoZWNrZWQ7XG5cbiAgICAvLyBWYWxpZGFjacOzbiBtZWpvcmFkYSAtIHZhbG9yZXMgbnVtw6lyaWNvcyB5IGzDrW1pdGVzXG4gICAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA8PSAwIHx8IHZhbHVlID4gMTAwMDAwMDAwMCkge1xuICAgICAgICBzaG93RXJyb3IoJ1BvciBmYXZvciwgaW5ncmVzZSB1biB2YWxvciBkZSBwcm9kdWN0byB2w6FsaWRvIGVudHJlIDEgeSAxLjAwMC4wMDAuMDAwLicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIFZhbGlkYXIgcXVlIGVsIHZhbG9yIG5vIGNvbnRlbmdhIG3DoXMgZGUgMiBkZWNpbWFsZXNcbiAgICBpZiAoKHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJy4nKVsxXSB8fCBbXSkubGVuZ3RoID4gMikge1xuICAgICAgICBzaG93RXJyb3IoJ1BvciBmYXZvciwgaW5ncmVzZSB1biB2YWxvciBjb24gbcOheGltbyAyIGRlY2ltYWxlcy4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEd1YXJkYW1vcyBlbCBwcm9kdWN0byBlbiBudWVzdHJvIGFycmF5XG4gICAgcHJvZHVjdHNUb0Rpc2NvdW50LnB1c2goeyB2YWx1ZSwgaXNIYWxmIH0pO1xuICAgIHJlbmRlclByb2R1Y3RzTGlzdCgpO1xuICAgIC8vIExpbXBpYW1vcyBsb3MgaW5wdXRzIHkgb2N1bHRhbW9zIGVycm9yZXNcbiAgICBwcm9kdWN0VmFsdWVJbnB1dC52YWx1ZSA9ICcnO1xuICAgIGlzSGFsZkNoZWNrYm94LmNoZWNrZWQgPSBmYWxzZTtcbiAgICBwcm9kdWN0VmFsdWVJbnB1dC5mb2N1cygpO1xuICAgIGhpZGVFcnJvcigpO1xufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVWRU5UTzogTGltcGlhciB0b2RvXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBSZXNldGVhIHRvZGEgbGEgYXBsaWNhY2nDs246XG4vLyAxLiBWYWPDrWEgbGEgbGlzdGEgZGUgcHJvZHVjdG9zXG4vLyAyLiBMaW1waWEgdG9kb3MgbG9zIGNhbXBvcyBkZSBlbnRyYWRhXG4vLyAzLiBPY3VsdGEgbG9zIHJlc3VsdGFkb3NcbmNsZWFyQWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHByb2R1Y3RzVG9EaXNjb3VudC5sZW5ndGggPSAwO1xuICAgIHJlbmRlclByb2R1Y3RzTGlzdCgpO1xuICAgIHJlc3VsdHNDYXJkLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgcHJvZHVjdFZhbHVlSW5wdXQudmFsdWUgPSAnJztcbiAgICBpc0hhbGZDaGVja2JveC5jaGVja2VkID0gZmFsc2U7XG4gICAgaW52b2ljZVRvdGFsSW5wdXQudmFsdWUgPSAnJztcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFVkVOVE86IENhbGN1bGFyIGRlc2N1ZW50byBmaW5hbFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUmVhbGl6YSBlbCBjw6FsY3VsbyBjb21wbGV0byBkZSBkZXNjdWVudG9zOlxuLy8gMS4gVmFsaWRhIGVsIG1vbnRvIHRvdGFsIGRlIGxhIGZhY3R1cmFcbi8vIDIuIENhbGN1bGEgZWwgZGVzY3VlbnRvIHBhcmEgY2FkYSBwcm9kdWN0byAoY29uc2lkZXJhbmRvIElWQSlcbi8vIDMuIEFjdHVhbGl6YSBsYSBpbnRlcmZheiBjb24gbG9zIHJlc3VsdGFkb3NcbmNhbGN1bGF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCBvcmlnaW5hbEludm9pY2VUb3RhbCA9IHBhcnNlRmxvYXQoaW52b2ljZVRvdGFsSW5wdXQudmFsdWUpO1xuXG4gICAgLy8gVmFsaWRhY2nDs24gbWVqb3JhZGEgcGFyYSBlbCB0b3RhbCBkZSBsYSBmYWN0dXJhXG4gICAgaWYgKGlzTmFOKG9yaWdpbmFsSW52b2ljZVRvdGFsKSB8fCBvcmlnaW5hbEludm9pY2VUb3RhbCA8PSAwIHx8IG9yaWdpbmFsSW52b2ljZVRvdGFsID4gMTAwMDAwMDAwMDApIHtcbiAgICAgICAgc2hvd0Vycm9yKCdQb3IgZmF2b3IsIGluZ3Jlc2UgdW4gbW9udG8gZGUgZmFjdHVyYSB2w6FsaWRvIGVudHJlIDEgeSAxMC4wMDAuMDAwLjAwMC4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBWYWxpZGFyIGRlY2ltYWxlc1xuICAgIGlmICgob3JpZ2luYWxJbnZvaWNlVG90YWwudG9TdHJpbmcoKS5zcGxpdCgnLicpWzFdIHx8IFtdKS5sZW5ndGggPiAyKSB7XG4gICAgICAgIHNob3dFcnJvcignRWwgbW9udG8gZGUgbGEgZmFjdHVyYSBkZWJlIHRlbmVyIG3DoXhpbW8gMiBkZWNpbWFsZXMuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAocHJvZHVjdHNUb0Rpc2NvdW50Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzaG93RXJyb3IoJ1BvciBmYXZvciwgYcOxYWRhIGFsIG1lbm9zIHVuIHByb2R1Y3RvIHBhcmEgZGVzY29udGFyLicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGhpZGVFcnJvcigpO1xuXG4gICAgbGV0IHRvdGFsRGlzY291bnRBbW91bnQgPSAwO1xuICAgIGNvbnN0IElWQV9SQVRFID0gMC4xOTsgLy8gVGFzYSBkZSBJVkEgKDE5JSlcblxuICAgIC8vIEPDoWxjdWxvIGRlIGRlc2N1ZW50byBtYW50ZW5pZW5kbyBwcmVjaXNpw7NuIGZsb2F0XG4gICAgcHJvZHVjdHNUb0Rpc2NvdW50LmZvckVhY2gocHJvZHVjdCA9PiB7XG4gICAgICAgIC8vIDEuIERldGVybWluYXIgdmFsb3IgYmFzZTogY29tcGxldG8gbyBtaXRhZCAocGFyYSB1bmlkYWRlcylcbiAgICAgICAgbGV0IGJhc2VWYWx1ZVRvRGlzY291bnQgPSBwcm9kdWN0LmlzSGFsZiA/IHByb2R1Y3QudmFsdWUgLyAyIDogcHJvZHVjdC52YWx1ZTtcbiAgICAgICAgXG4gICAgICAgIC8vIDIuIENhbGN1bGFyIHZhbG9yIGNvbiBJVkE6IGJhc2UgKiAoMSArIElWQV9SQVRFKVxuICAgICAgICBsZXQgdmFsdWVXaXRoSXZhID0gYmFzZVZhbHVlVG9EaXNjb3VudCAqICgxICsgSVZBX1JBVEUpO1xuICAgICAgICBcbiAgICAgICAgLy8gMy4gQWN1bXVsYXIgYWwgZGVzY3VlbnRvIHRvdGFsIG1hbnRlbmllbmRvIGZsb2F0XG4gICAgICAgIHRvdGFsRGlzY291bnRBbW91bnQgKz0gdmFsdWVXaXRoSXZhO1xuICAgIH0pO1xuXG4gICAgLy8gNC4gQ2FsY3VsYXIgZWwgbnVldm8gdG90YWwgY29uIGZsb2F0XG4gICAgY29uc3QgbmV3SW52b2ljZVRvdGFsID0gb3JpZ2luYWxJbnZvaWNlVG90YWwgLSB0b3RhbERpc2NvdW50QW1vdW50O1xuXG4gICAgLy8gTW9zdHJhbW9zIGxvcyByZXN1bHRhZG9zXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdC1vcmlnaW5hbCcpLnRleHRDb250ZW50ID0gZm9ybWF0Q3VycmVuY3kob3JpZ2luYWxJbnZvaWNlVG90YWwpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHQtZGlzY291bnQnKS50ZXh0Q29udGVudCA9IGZvcm1hdEN1cnJlbmN5KHRvdGFsRGlzY291bnRBbW91bnQpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHQtdG90YWwnKS50ZXh0Q29udGVudCA9IGZvcm1hdEN1cnJlbmN5KG5ld0ludm9pY2VUb3RhbCk7XG4gICAgXG4gICAgcmVzdWx0c0NhcmQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSUEsa0JBQWtCLEdBQUcsRUFBRTtBQUMzQixNQUFNQyxpQkFBaUIsR0FBR0MsUUFBUSxDQUFDQyxjQUFjLENBQUMsZUFBZSxDQUFDO0FBQ2xFLE1BQU1DLGlCQUFpQixHQUFHRixRQUFRLENBQUNDLGNBQWMsQ0FBQyxlQUFlLENBQUM7QUFDbEUsTUFBTUUsY0FBYyxHQUFHSCxRQUFRLENBQUNDLGNBQWMsQ0FBQyxTQUFTLENBQUM7QUFDekQsTUFBTUcsYUFBYSxHQUFHSixRQUFRLENBQUNDLGNBQWMsQ0FBQyxpQkFBaUIsQ0FBQztBQUNoRSxNQUFN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